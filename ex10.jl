using HorizonSideRobots

robot = Robot(animate = true)

"""
    check(robot, x, y, r)

    –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–∑–æ—Ä–∞ –∏–∑ –º–∞—Ä–∫–µ—Ä–æ–≤ —Å –∑–∞–¥–∞–Ω–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º –∫–ª–µ—Ç–∫–∏.
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    - robot: –≠–∫–∑–µ–º–ø–ª—è—Ä —Ä–æ–±–æ—Ç–∞
    - x, y: –¢–µ–∫—É—â–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
    - r: –†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–π –∫–ª–µ—Ç–∫–∏ —É–∑–æ—Ä–∞
    
    –ê–ª–≥–æ—Ä–∏—Ç–º:
    –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–∞—Ä–∫–µ—Ä, –µ—Å–ª–∏ —Ç–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —á–∞—Å—Ç–∏ —É–∑–æ—Ä–∞,
    –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç–∏ 2r –ø–æ –æ–±–µ–∏–º –æ—Å—è–º
   
   
   
 –§—É–Ω–∫—Ü–∏—è check(robot, x, y, r): –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –ø–æ–ø–∞–¥–∞–µ—Ç –ª–∏ —Ç–æ—á–∫–∞ (x, y) –≤ —á–µ—Ä–Ω—ã–π –∫–≤–∞–¥—Ä–∞—Ç —à–∞—Ö–º–∞—Ç–Ω–æ–≥–æ –ø–æ–ª—è —Å —Ä–∞–∑–º–µ—Ä–æ–º –∫–≤–∞–¥—Ä–∞—Ç–∞ r.
fl1 = (x % (2r) < r):
–í—ã—á–∏—Å–ª—è–µ—Ç –æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è x –Ω–∞ 2ùëü. –≠—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ x –≤ –ø–µ—Ä–≤–æ–π –ø–æ–ª–æ–≤–∏–Ω–µ –∫–≤–∞–¥—Ä–∞—Ç–∞ (—à–∏—Ä–∏–Ω–æ–π r). –ï—Å–ª–∏ x –º–µ–Ω—å—à–µ r, fl1 = true.
fl2 = (abs(y) % (2r) < r):
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è y. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ y –≤ –ø–µ—Ä–≤–æ–π –ø–æ–ª–æ–≤–∏–Ω–µ —Å–≤–æ–µ–≥–æ –∫–≤–∞–¥—Ä–∞—Ç–∞.
if fl1 == fl2: –ï—Å–ª–∏ fl1 –∏ fl2 —Ä–∞–≤–Ω—ã, –∑–Ω–∞—á–∏—Ç, –æ–±–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ª–∏–±–æ –≤ —á–µ—Ä–Ω–æ–π, –ª–∏–±–æ –≤ –±–µ–ª–æ–π –æ–±–ª–∞—Å—Ç–∏ –∫–≤–∞–¥—Ä–∞—Ç–∞.
putmarker!(robot): –ï—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç –ø–æ —Ü–≤–µ—Ç—É, —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–º–µ—á–∞–µ—Ç —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –Ω–∞ –ø–æ–ª–µ.
–≠—Ç–∞ –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–µ—Ç —à–∞—Ö–º–∞—Ç–Ω–æ–µ –ø–æ–ª–µ, —á–µ—Ä–µ–¥—É—è —á–µ—Ä–Ω—ã–µ –∏ –±–µ–ª—ã–µ –∫–≤–∞–¥—Ä–∞—Ç—ã.


"""
function check(robot, x, y, r)
    fl1 = (x % (2*r) < r)
    fl2 = (abs(y) % (2*r) < r)
    if fl1 == fl2
        putmarker!(robot)
    end
end
 
"""
    go_back(robot, x, y)

    –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ä–æ–±–æ—Ç–∞ –≤ –∏—Å—Ö–æ–¥–Ω—É—é –ø–æ–∑–∏—Ü–∏—é.
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    - robot: –≠–∫–∑–µ–º–ø–ª—è—Ä —Ä–æ–±–æ—Ç–∞
    - x, y: –¶–µ–ª–µ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
"""
function go_back(robot, x, y)
    while x > 0
        move!(robot, West)
        x -= 1
    end
    while y < 0
        move!(robot, Nord)
        y += 1
    end
end
 
"""
    result(robot, r)

    –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç —É–∑–æ—Ä –∏–∑ –º–∞—Ä–∫–µ—Ä–æ–≤ –≤ –≤–∏–¥–µ —Å–µ—Ç–∫–∏ —Å –∑–∞–¥–∞–Ω–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º –∫–ª–µ—Ç–∫–∏.

    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    - robot: –≠–∫–∑–µ–º–ø–ª—è—Ä —Ä–æ–±–æ—Ç–∞
    - r: –†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–π –∫–ª–µ—Ç–∫–∏ —É–∑–æ—Ä–∞

    –ê–ª–≥–æ—Ä–∏—Ç–º:
    1. –ü–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ –≤–µ—Ä—Ö–Ω–∏–π –ª–µ–≤—ã–π —É–≥–æ–ª
    2. –ü—Ä–æ—Ö–æ–¥–∏—Ç –≤—Å–µ –ø–æ–ª–µ –∑–º–µ–π–∫–æ–π:
       - –ß–µ—Ä–µ–¥—É–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ª–µ–≤–æ –∏ –≤–ø—Ä–∞–≤–æ
       - –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∫—Ä–∞—è —Å–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–æ–∫—É –≤–Ω–∏–∑
    3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–∞—Ä–∫–µ—Ä—ã —Å–æ–≥–ª–∞—Å–Ω–æ —à–∞–±–ª–æ–Ω—É —Å–µ—Ç–∫–∏
    4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –∏—Å—Ö–æ–¥–Ω—É—é –ø–æ–∑–∏—Ü–∏—é

    –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
    - –°–æ–∑–¥–∞–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π —É–∑–æ—Ä —Å –ø–µ—Ä–∏–æ–¥–æ–º 2r –ø–æ –æ–±–µ–∏–º –æ—Å—è–º
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
"""
function result(robot, r)
    x = 0
    y = 0
    while !isborder(robot, West)
        move!(robot, West)
    end
    while !isborder(robot, Nord)
        move!(robot, Nord)
    end
 
    check(robot, x, y, r)
    dir = Ost
    while (!isborder(robot, Ost) || !isborder(robot, Sud))
        while !isborder(robot, dir)
            move!(robot, dir)
            if dir == Ost
                x += 1
            else
                x -= 1
            end
            check(robot, x, y, r)
        end
        if !isborder(robot, Sud)
            move!(robot, Sud)
            y -= 1
            check(robot, x, y, r)
        end
        if dir == Ost
            dir = West
        else
            dir = Ost
        end
    end
    go_back(robot, x, y)
end